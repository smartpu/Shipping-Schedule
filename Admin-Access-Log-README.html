<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin · 访客统计使用说明</title>
    <link rel="stylesheet" href="vendor/theme-styles.css">
    <script src="vendor/auth-gist.js"></script>
</head>
<body data-page="Admin-Access-Log-README.html">
    <div class="dashboard-container">
        <!-- 左侧导航栏占位容器（将由sidebar-loader.js动态加载） -->
        <div id="sidebar-placeholder"></div>

        <!-- 右侧内容 -->
        <main class="dashboard-content">
            <div class="container">
                <!-- 顶部介绍卡片，沿用 dashboard 风格 -->
                <div class="section-intro">
                    <div class="section-intro-header">
                        <div class="section-intro-content">
                            <h2>Admin · 访客统计使用说明</h2>
                            <p>专业的访问日志分析工具，支持从 Gist 自动加载或手动上传 JSON 文件，提供用户访问排名、页面访问排名和访问时间分析等功能。</p>
                        </div>
                        <div class="section-intro-actions">
                            <a href="dashboard.html?tab=admin" class="tool-link" aria-label="返回工具集首页">← 返回首页</a>
                            <a href="Admin-Access-Log.html?from=admin" class="tool-link secondary" aria-label="打开工具">打开工具 →</a>
                        </div>
                    </div>
                </div>

                <!-- 内容区域 -->
                <div class="card-white mt-20">
                    <div class="readme-content">
                        <h2>工具简介</h2>
                        <p><strong>Admin · 访客统计</strong> 是一款专业的访问日志分析工具。支持从 Gist 自动加载或手动上传 JSON 格式的访问日志文件，通过多维度统计分析，帮助快速掌握用户访问行为和页面访问热度。工具主要特点：</p>
                        <ul>
                            <li><strong>自动加载日志</strong>：优先从 Gist 自动加载访问日志数据，失败时回退到本地文件</li>
                            <li><strong>统计概览</strong>：使用苹果风格的主题色大卡片展示总访问次数、独立访客数、访问页面数和平均访问次数</li>
                            <li><strong>用户访问排名</strong>：按访问次数排序，显示前20名用户的访问统计信息，悬停查看最近访问记录</li>
                            <li><strong>页面访问排名</strong>：按访问次数排序，显示前20个最受欢迎的页面，悬停查看最近访问用户</li>
                            <li><strong>访问时间分析</strong>：使用主题色系图表展示访问趋势，支持按小时/日期/周/月维度查看</li>
                            <li><strong>手动上传</strong>：支持手动选择 JSON 格式的访问日志文件</li>
                        </ul>

                        <hr>

                        <h2>快速开始</h2>
                        <h3>前置准备</h3>
                        <ol>
                            <li><strong>访问日志文件</strong>：准备 JSON 格式的访问日志文件，或确保 Gist 中有可用的访问日志数据</li>
                            <li><strong>浏览器</strong>：推荐使用 Chrome、Edge 或 Safari 浏览器</li>
                        </ol>

                        <h3>基本流程</h3>
                        <ol>
                            <li>打开工具页面</li>
                            <li>工具会自动尝试从 Gist 加载访问日志数据（如果 Gist 加载失败，会尝试从本地 Data 目录加载）</li>
                            <li>如果自动加载失败或需要手动选择：
                                <ul>
                                    <li>点击"载入访问日志"，手动选择 JSON 格式的访问日志文件</li>
                                </ul>
                            </li>
                            <li>数据加载成功后，工具会自动显示：
                                <ul>
                                    <li><strong>统计概览</strong>：四个主题色大卡片展示总访问次数、独立访客、访问页面数、平均访问次数</li>
                                    <li><strong>用户访问排名</strong>：前20名用户的访问统计（排名、姓名、手机号、邮箱、访问次数、最后访问时间），悬停查看最近访问记录</li>
                                    <li><strong>页面访问排名</strong>：前20个最受欢迎的页面（排名、页面、访问次数、独立访客、访问占比），悬停查看最近访问用户</li>
                                    <li><strong>访问时间分析</strong>：默认按日期显示访问趋势图表，可切换为按小时/周/月查看</li>
                                </ul>
                            </li>
                            <li>在"访问时间分析"部分，点击不同的时间维度按钮（按小时/按日期/按周/按月）切换查看方式</li>
                            <li>悬停在用户排名或页面排名的表格行上，查看详细的访问记录或访问用户信息</li>
                        </ol>

                        <hr>

                        <h2>核心功能</h2>
                        <h3>1. 数据加载</h3>
                        <ul>
                            <li><strong>Gist 自动加载</strong>：优先从 Gist 自动加载访问日志数据（无需手动下载）</li>
                            <li><strong>本地文件回退</strong>：如果 Gist 加载失败，自动尝试从本地 Data 目录加载</li>
                            <li><strong>手动上传</strong>：支持手动选择 JSON 格式的访问日志文件</li>
                            <li>所有数据仅在本地浏览器解析，不会上传至任何服务器</li>
                        </ul>

                        <h3>2. 统计概览</h3>
                        <ul>
                            <li>使用苹果风格的主题色大卡片展示四个核心指标</li>
                            <li><strong>总访问次数</strong>：过滤后的访问记录数（已排除本人记录）</li>
                            <li><strong>独立访客</strong>：根据姓名、手机号和邮箱组合去重后的用户数量（已排除本人）</li>
                            <li><strong>访问页面数</strong>：过滤后的访问记录中出现的不同页面数量</li>
                            <li><strong>平均访问次数</strong>：总访问次数除以独立访客数</li>
                            <li>卡片采用主题蓝色渐变背景，悬停时有轻微上浮效果</li>
                            <li><strong>注意</strong>：所有统计数据均基于过滤后的数据（已排除本人的访问记录）</li>
                        </ul>

                        <h3>3. 用户访问排名</h3>
                        <ul>
                            <li>按访问次数从高到低排序，只显示前20名用户</li>
                            <li>显示信息包括：排名、姓名、手机号、邮箱、访问次数、最后访问时间</li>
                            <li><strong>悬停查看详情</strong>：悬停在表格行上，显示该用户最近10次访问的页面及时间（紧凑一行显示）</li>
                            <li>访问次数和排名使用主题蓝色高亮显示</li>
                        </ul>

                        <h3>4. 页面访问排名</h3>
                        <ul>
                            <li>按访问次数从高到低排序，只显示前20个页面</li>
                            <li>显示信息包括：排名、页面名称、访问次数、独立访客数、访问占比</li>
                            <li><strong>悬停查看详情</strong>：悬停在表格行上，显示该页面最近10个访问用户及时间（紧凑一行显示）</li>
                            <li>访问占比显示该页面的访问次数占总访问次数的百分比</li>
                        </ul>

                        <h3>5. 访问时间分析</h3>
                        <ul>
                            <li>使用主题色系折线图展示访问趋势</li>
                            <li>支持四种时间维度：
                                <ul>
                                    <li><strong>按小时</strong>：显示每小时内的访问次数</li>
                                    <li><strong>按日期</strong>：显示每天的访问次数（默认）</li>
                                    <li><strong>按周</strong>：显示每周的访问次数</li>
                                    <li><strong>按月</strong>：显示每月的访问次数</li>
                                </ul>
                            </li>
                            <li>图表使用主题蓝色（<code>var(--color-brand-blue)</code>）作为线条颜色</li>
                            <li>图表高度固定为 300px，不会超出正常表格范围</li>
                            <li>支持交互式查看，鼠标悬停显示具体数值</li>
                        </ul>

                        <hr>

                        <h2>数据格式要求</h2>
                        <ul>
                            <li>访问日志文件必须是 JSON 格式</li>
                            <li>数据应为数组格式，每个元素包含以下字段：
                                <ul>
                                    <li><strong>page</strong>：访问的页面名称（字符串）</li>
                                    <li><strong>name</strong>：用户姓名（字符串）</li>
                                    <li><strong>phone</strong>：用户手机号（字符串）</li>
                                    <li><strong>email</strong>：用户邮箱（字符串）</li>
                                    <li><strong>timestamp</strong>：访问时间戳（数字，毫秒）</li>
                                    <li><strong>date</strong>：格式化的日期时间字符串（可选）</li>
                                </ul>
                            </li>
                            <li>示例格式：
                                <pre><code>[
  {
    "page": "index.html",
    "name": "张三",
    "phone": "13800138000",
    "email": "zhangsan@example.com",
    "timestamp": 1765966118650,
    "date": "2025/12/17 18:08:38"
  },
  ...
]</code></pre>
                            </li>
                        </ul>

                        <hr>

                        <h2>注意事项</h2>
                        <ul>
                            <li>所有数据仅在本地浏览器解析，不会上传至任何服务器，请放心使用</li>
                            <li>统计数据仅供参考，不构成任何商业决策依据</li>
                            <li>建议使用最新版本的 Chrome、Edge 或 Safari 浏览器以获得最佳体验</li>
                            <li>如果访问日志文件较大，加载和解析可能需要几秒钟时间</li>
                            <li>时间分析图表需要 Chart.js 库支持，如果图表无法显示，请检查网络连接或刷新页面</li>
                            <li>工具会自动排除本人的访问记录（根据配置的手机号和姓名），只统计其他用户的访问数据</li>
                            <li>悬停提示使用紧凑的一行显示格式，方便快速查看详细信息</li>
                        </ul>

                        <hr>

                        <h2>使用技巧</h2>
                        <ul>
                            <li>工具会自动从 Gist 加载访问日志，无需手动下载文件</li>
                            <li>如果 Gist 加载失败，可以手动选择本地 JSON 文件</li>
                            <li>悬停在用户排名表格行上，可以快速查看该用户的最近访问记录</li>
                            <li>悬停在页面排名表格行上，可以快速查看该页面的最近访问用户</li>
                            <li>在访问时间分析中，可以切换不同的时间维度，从不同角度观察访问趋势</li>
                            <li>统计概览卡片采用苹果风格设计，视觉效果清晰美观</li>
                        </ul>

                        <hr>

                        <h2>常见问题</h2>
                        <h3>Q1: 无法从 Gist 加载数据？</h3>
                        <p><strong>A</strong>：可能的原因：</p>
                        <ul>
                            <li>网络连接问题，检查网络连接是否正常</li>
                            <li>Gist URL 配置错误，检查代码中的 Gist ID 和 commit hash 是否正确</li>
                            <li>Gist 文件不存在或已删除</li>
                            <li>如果 Gist 加载失败，工具会自动尝试从本地 Data 目录加载，或手动选择文件</li>
                        </ul>

                        <h3>Q2: 图表无法显示？</h3>
                        <p><strong>A</strong>：可能的原因：</p>
                        <ul>
                            <li>Chart.js 库未正确加载，刷新页面重试</li>
                            <li>网络连接问题，检查网络连接是否正常</li>
                            <li>浏览器控制台是否有错误信息</li>
                        </ul>

                        <h3>Q3: 统计数据不准确？</h3>
                        <p><strong>A</strong>：可能的原因：</p>
                        <ul>
                            <li>访问日志数据格式不正确</li>
                            <li>数据中包含无效的时间戳或字段</li>
                            <li>工具会自动排除本人的访问记录，确保统计数据只包含其他用户</li>
                            <li>检查浏览器控制台是否有错误信息</li>
                        </ul>

                        <h3>Q4: 悬停提示显示不完整？</h3>
                        <p><strong>A</strong>：悬停提示使用紧凑的一行显示格式，如果内容过长会自动截断。可以：</p>
                        <ul>
                            <li>查看完整的页面名称或用户名（tooltip 会显示完整内容）</li>
                            <li>检查浏览器窗口大小是否过小</li>
                            <li>刷新页面重新加载</li>
                        </ul>
                    </div>
                </div>

                <!-- 使用声明 -->
                <div class="card-white mt-20">
                    <h2 class="usage-statement-title">Admin · 访客统计使用声明</h2>
                    <p class="usage-statement-text">访问日志数据仅用于内部统计分析，所有数据仅在本地浏览器解析，不会上传至任何服务器。</p>
                    <p class="usage-statement-text">统计数据仅供参考，不构成任何商业决策依据。</p>
                </div>
            </div>
        </main>
    </div>

    <!-- 引入导航栏公共组件 -->
    <script src="vendor/common-utils.js"></script>
    <script src="vendor/debug-utils.js"></script>
    <script src="vendor/sidebar-loader.js"></script>
    <script>
        // 使用公共初始化函数
        init001ToolPage('Admin-Access-Log-README.html', 'admin');
    </script>
</body>
</html>
