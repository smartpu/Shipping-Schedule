<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitor · 船期表使用说明</title>
    <link rel="stylesheet" href="vendor/auth.css">
    <link rel="stylesheet" href="vendor/common-styles.css">
    <link rel="stylesheet" href="vendor/readme-styles.css">
    <style>
        /* 页面特定样式（保留与公共样式不同的部分） */
    </style>
</head>
<body data-page="Monitor-Sailing-Schedule-README.html">
    <!-- 用户验证模态框 -->
    <div id="authOverlay" class="auth-overlay">
        <div class="auth-modal">
            <h2>🔐 访问验证</h2>
            <p>为了了解工具使用情况，请填写以下信息</p>
            <form id="authForm">
                <div class="auth-form-group">
                    <label for="userName">姓名 *</label>
                    <input type="text" id="userName" name="userName" placeholder="请输入您的姓名" required autocomplete="name">
                    <div class="auth-error" id="nameError">请输入您的姓名</div>
                </div>
                <div class="auth-form-group">
                    <label for="userPhone">手机号 *</label>
                    <input type="tel" id="userPhone" name="userPhone" placeholder="请输入您的手机号" required autocomplete="tel">
                    <div class="auth-error" id="phoneError">请输入有效的手机号</div>
                </div>
                <div class="auth-form-group">
                    <label for="userEmail">邮箱 *</label>
                    <input type="email" id="userEmail" name="userEmail" placeholder="请输入您的邮箱地址" required autocomplete="email">
                    <div class="auth-error" id="emailError">请输入有效的邮箱地址</div>
                </div>
                <button type="submit" class="auth-submit-btn">确认并继续</button>
            </form>
        </div>
    </div>
    <div class="container">
        <div class="header">
            <a href="index.html?tab=monitor" class="back-home-btn">← 返回首页</a>
            <h1>Monitor · 船期表使用说明</h1>
        </div>

        <div class="content">
            <h2>工具简介</h2>
            <p><strong>Monitor · 船期表</strong> 是一款专业的船期可视化与分析工具。支持 001 和 365 两种数据模式，提供日历视图展示、多维度筛选、AI 智能分析等功能，帮助用户快速掌握船期信息并做出决策。</p>
            <p>工具主要特点：</p>
            <ul>
                <li><strong>双模式支持</strong>：支持 001（维运网）和 365（明日数航）两种数据格式</li>
                <li><strong>日历视图</strong>：以周为单位展示船期，直观清晰</li>
                <li><strong>多维度筛选</strong>：支持区域、船公司、港口等多维度筛选</li>
                <li><strong>AI 智能分析</strong>：集成 DeepSeek / KIMI / 通义千问 多模型 AI 分析</li>
                <li><strong>PDF 导出</strong>：支持导出包含 AI 分析结果的完整 PDF 报告</li>
            </ul>

            <hr>

            <h2>快速开始</h2>
            <h3>前置准备</h3>
            <ol>
                <li><strong>Excel 数据文件</strong>：准备包含船期数据的 Excel 文件（支持 001 或 365 格式）</li>
                <li><strong>AI API 密钥（可选）</strong>：
                    <ul style="margin-top: 8px; margin-left: 20px; list-style: disc;">
                        <li>工具已集成测试 API Key，可直接使用 AI 分析功能</li>
                        <li><strong>强烈建议自行申请 API Key 自用</strong>：测试 API Key 随时可能过期无法使用，且可能存在配额限制</li>
                        <li>如果用户自行填写 API Key，用户输入的 API Key 优先级高于配置文件中的测试 API Key</li>
                        <li>申请地址：
                            <ul style="margin-top: 4px; margin-left: 20px; list-style: circle;">
                                <li>DeepSeek：<a href="https://platform.deepseek.com" target="_blank" style="color: #667eea; text-decoration: underline;">https://platform.deepseek.com</a></li>
                                <li>KIMI：<a href="https://platform.moonshot.cn/console/api-keys" target="_blank" style="color: #667eea; text-decoration: underline;">https://platform.moonshot.cn/console/api-keys</a></li>
                                <li>通义千问：<a href="https://dashscope.console.aliyun.com/apiKey" target="_blank" style="color: #667eea; text-decoration: underline;">https://dashscope.console.aliyun.com/apiKey</a></li>
                            </ul>
                        </li>
                        <li>调用费用及合规责任由使用方承担</li>
                    </ul>
                </li>
            </ol>

            <h3>基本流程</h3>
            <ol>
                <li>打开 <code>Monitor-Sailing-Schedule.html</code></li>
                <li>选择数据模式（001 或 365）</li>
                <li>点击"选择Excel文件"，上传包含船期数据的 Excel 文件</li>
                <li>数据加载成功后，使用筛选器选择区域、船公司、港口等条件</li>
                <li>在日历视图中查看筛选后的船期信息</li>
                <li>（可选）使用 AI 分析功能获取智能建议</li>
                <li>（可选）点击"导出 PDF"按钮导出完整报告</li>
            </ol>

            <hr>

            <h2>核心功能</h2>
            <h3>1. 数据模式切换</h3>
            <ul>
                <li><strong>001 模式</strong>：适用于维运网（weiyun001.com）数据格式</li>
                <li><strong>365 模式</strong>：适用于明日数航（hangyun365.com）数据格式</li>
                <li>切换模式后需要重新上传对应的 Excel 文件</li>
            </ul>

            <h3>2. 多维度筛选</h3>
            <ul>
                <li><strong>区域筛选</strong>：支持多选区域，快速定位目标市场</li>
                <li><strong>船公司筛选</strong>：支持多选船公司，查看特定承运商的船期</li>
                <li><strong>港口筛选</strong>：支持多选港口，聚焦特定目的港</li>
                <li><strong>搜索功能</strong>：所有筛选器都支持实时搜索，快速定位选项</li>
            </ul>

            <h3>3. 日历视图</h3>
            <ul>
                <li><strong>周视图</strong>：以周为单位展示船期，每列代表一天</li>
                <li><strong>船期卡片</strong>：每个船期以卡片形式展示，包含目的港、船公司、船名航次等信息</li>
                <li><strong>高亮显示</strong>：点击船期卡片可高亮显示相同船名航次的所有记录</li>
                <li><strong>更多提示</strong>：当某天船期超过 7 条时，显示"还有 X 条..."提示，悬停查看详情</li>
            </ul>

            <h3>4. AI 智能分析</h3>
            <ul>
                <li><strong>多模型支持</strong>：支持 DeepSeek、KIMI（Moonshot）、通义千问三种 AI 模型</li>
                <li><strong>API Key 配置</strong>：
                    <ul style="margin-top: 8px; margin-left: 20px; list-style: disc;">
                        <li>工具已集成测试 API Key，可直接使用，无需手动输入</li>
                        <li><strong>强烈建议自行申请 API Key</strong>：测试 API Key 随时可能过期无法使用，且可能存在配额限制</li>
                        <li>如果用户自行填写 API Key，用户输入的 API Key 优先级高于配置文件中的测试 API Key</li>
                        <li>配置会自动保存到浏览器本地存储，下次打开会自动加载</li>
                    </ul>
                </li>
                <li><strong>智能分析</strong>：基于当前筛选的船期数据，AI 提供趋势分析和决策建议</li>
                <li><strong>结果对比</strong>：可切换不同模型对比分析结果，交叉验证观点</li>
            </ul>

            <h3>5. PDF 导出</h3>
            <ul>
                <li><strong>完整导出</strong>：导出包含筛选结果、日历视图和 AI 分析结果的完整页面</li>
                <li><strong>自动命名</strong>：文件名格式为 <code>Monitor-Sailing-Schedule_YYYYMMDD.pdf</code></li>
                <li><strong>高质量</strong>：支持多页导出，确保内容完整清晰</li>
            </ul>

            <hr>

            <h2>数据格式要求</h2>
            <h3>001 模式数据格式</h3>
            <ul>
                <li>Excel 文件需包含 <code>schedule</code> 工作表</li>
                <li>必需字段：港口、航线、周别、运力、船名航次、开船日期等</li>
                <li>日期格式支持：Excel 日期序列号、标准日期格式（YYYY/MM/DD）</li>
            </ul>

            <h3>365 模式数据格式</h3>
            <ul>
                <li>Excel 文件需包含 <code>schedule</code> 工作表</li>
                <li>必需字段：区域、子区域、国家/地区、港口、航线、周别、运力、船名航次、开船日期等</li>
                <li>支持四级筛选层级：区域 → 子区域 → 国家/地区 → 港口</li>
            </ul>

            <hr>

            <h2>使用技巧</h2>
            <ul>
                <li><strong>快速筛选</strong>：使用搜索框快速定位筛选选项，支持中文和英文搜索</li>
                <li><strong>组合筛选</strong>：可以同时选择多个区域、船公司、港口，系统会自动取交集</li>
                <li><strong>高亮追踪</strong>：点击船期卡片后，相同船名航次的所有记录会高亮显示，便于追踪</li>
                <li><strong>AI 分析时机</strong>：建议在完成筛选后使用 AI 分析，获得更精准的建议</li>
                <li><strong>PDF 导出</strong>：导出前确保已加载数据并完成筛选，以获得完整的报告</li>
            </ul>

            <hr>

            <h2>注意事项</h2>
            <ul>
                <li>工具支持的数据范围为"当周 + 未来四周"（共 5 周），不显示历史数据</li>
                <li>AI 分析功能需要网络连接，API Key 已统一配置，无需手动输入</li>
                <li>PDF 导出功能需要加载外部库，首次使用可能需要等待几秒钟</li>
                <li>建议使用 Chrome、Edge 或 Safari 浏览器以获得最佳体验</li>
                <li>数据仅存储在浏览器本地，不会上传到服务器</li>
            </ul>

            <hr>

            <h2>常见问题</h2>
            <h3>Q: 为什么上传文件后没有显示数据？</h3>
            <p>A: 请检查 Excel 文件是否包含 <code>schedule</code> 工作表，以及数据是否在"当周 + 未来四周"的时间范围内。</p>

            <h3>Q: AI 分析功能无法使用？</h3>
            <p>A: 请检查：</p>
            <ul>
                <li>网络连接是否正常，确保可以访问 AI API</li>
                <li>如果使用的是测试 API Key，可能已过期或配额不足，建议自行申请 API Key</li>
                <li>如果已自行配置 API Key，请检查 API Key、URL 和模型 ID 是否正确</li>
                <li>查看浏览器控制台是否有错误信息</li>
            </ul>

            <h3>Q: 如何切换数据模式？</h3>
            <p>A: 点击页面顶部的"001"或"365"按钮即可切换模式。切换后需要重新上传对应格式的 Excel 文件。</p>

            <h3>Q: PDF 导出失败怎么办？</h3>
            <p>A: 请检查网络连接，确保可以加载 PDF 导出所需的库。如果问题持续，请刷新页面后重试。</p>
        </div>
    </div>
    <!-- 使用 Gist 存储系统（用户白名单 + 访问记录） -->
    <script src="vendor/auth-gist.js"></script>
</body>
</html>

