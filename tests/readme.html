<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin · 单元测试工具使用说明</title>
    <link rel="stylesheet" href="../vendor/theme-styles.css">
    <script src="../vendor/auth-gist.js"></script>
</head>
<body data-page="tests/readme.html">
    <div class="dashboard-container">
        <!-- 左侧导航栏占位容器（将由sidebar-loader.js动态加载） -->
        <div id="sidebar-placeholder"></div>

        <!-- 右侧内容 -->
        <main class="dashboard-content">
            <div class="container">
                <!-- 顶部介绍卡片 -->
                <div class="section-intro">
                    <div class="section-intro-header">
                        <div class="section-intro-content">
                            <h2>Admin · 单元测试工具使用说明</h2>
                            <p>Shipping Tools 代码质量保障工具，用于验证核心功能模块的正确性和稳定性。</p>
                        </div>
                        <div class="section-intro-actions">
                            <a href="../dashboard.html?tab=admin" class="tool-link" aria-label="返回工具集首页">← 返回首页</a>
                            <a href="index.html?from=admin" class="tool-link secondary" aria-label="打开工具">打开工具 →</a>
                        </div>
                    </div>
                </div>

                <!-- 内容区域 -->
                <div class="card-white mt-20">
                    <div class="readme-content">
                        <h2>工具简介</h2>
                        <p><strong>Admin · 单元测试工具</strong> 是 Shipping Tools 项目的代码质量保障工具。通过运行自动化测试套件，验证核心功能模块的正确性和稳定性，确保工具集的可靠运行。工具主要特点：</p>
                        <ul>
                            <li><strong>自动化测试</strong>：一键运行所有测试套件，自动验证功能模块</li>
                            <li><strong>实时反馈</strong>：控制台实时显示测试进度和结果</li>
                            <li><strong>测试摘要</strong>：自动生成测试结果摘要，清晰展示通过/失败情况</li>
                            <li><strong>多模块覆盖</strong>：覆盖错误处理、公共工具、解析工具、日期工具、周数工具、港口排序、AI 工具、PDF 工具、市场分析、模板工具、调试工具等核心模块</li>
                            <li><strong>浏览器环境</strong>：直接在浏览器中运行，无需额外环境配置</li>
                        </ul>

                        <hr>

                        <h2>快速开始</h2>
                        <h3>前置准备</h3>
                        <ol>
                            <li><strong>浏览器</strong>：推荐使用 Chrome、Edge 或 Safari 浏览器</li>
                            <li><strong>依赖文件</strong>：确保所有 vendor 目录下的依赖文件已正确加载</li>
                        </ol>

                        <h3>基本流程</h3>
                        <ol>
                            <li>打开工具页面（<code>tests/index.html</code>）</li>
                            <li>工具会自动加载所有依赖库和测试文件</li>
                            <li>点击"运行所有测试"按钮开始测试</li>
                            <li>在控制台输出区域查看测试进度和结果</li>
                            <li>查看测试结果摘要，了解整体测试情况</li>
                            <li>（可选）点击"清空控制台"按钮清除输出内容</li>
                        </ol>

                        <hr>

                        <h2>核心功能</h2>
                        <h3>1. 测试控制</h3>
                        <ul>
                            <li><strong>运行所有测试</strong>：一键运行所有测试套件，自动验证所有功能模块</li>
                            <li><strong>清空控制台</strong>：清除控制台输出内容，便于重新查看测试结果</li>
                        </ul>

                        <h3>2. 测试套件</h3>
                        <p>工具包含以下测试套件：</p>
                        <ul>
                            <li><strong>错误处理模块</strong>：验证错误处理函数的正确性</li>
                            <li><strong>公共工具函数</strong>：验证公共工具函数（如文件加载、数据解析等）</li>
                            <li><strong>解析工具函数</strong>：验证 HTML 解析、数据提取等功能</li>
                            <li><strong>日期工具函数</strong>：验证日期格式化、解析、计算等功能</li>
                            <li><strong>库加载器</strong>：验证动态库加载功能</li>
                            <li><strong>AI 工具函数</strong>：验证 AI 相关工具函数</li>
                            <li><strong>PDF 工具函数</strong>：验证 PDF 导出相关功能</li>
                            <li><strong>市场分析工具函数</strong>：验证市场分析相关工具函数</li>
                            <li><strong>模板工具函数</strong>：验证模板生成相关功能</li>
                            <li><strong>调试工具函数</strong>：验证调试工具函数的正确性</li>
                        </ul>

                        <h3>3. 测试结果</h3>
                        <ul>
                            <li><strong>实时输出</strong>：控制台实时显示每个测试的执行情况</li>
                            <li><strong>结果摘要</strong>：自动生成测试结果摘要，包括：
                                <ul>
                                    <li>总计测试数量</li>
                                    <li>通过测试数量</li>
                                    <li>失败测试数量</li>
                                    <li>测试状态（全部通过/部分失败）</li>
                                </ul>
                            </li>
                            <li><strong>颜色标识</strong>：
                                <ul>
                                    <li>绿色：测试通过</li>
                                    <li>红色：测试失败</li>
                                    <li>橙色：警告信息</li>
                                </ul>
                            </li>
                        </ul>

                        <hr>

                        <h2>测试框架</h2>
                        <h3>断言函数</h3>
                        <p>测试框架提供以下断言函数：</p>
                        <ul>
                            <li><strong>assert(condition, message)</strong>：基础断言，验证条件是否为真</li>
                            <li><strong>assertEqual(actual, expected, message)</strong>：断言两个值相等</li>
                            <li><strong>assertNotNull(value, message)</strong>：断言值不为 null 或 undefined</li>
                            <li><strong>assertNull(value, message)</strong>：断言值为 null 或 undefined</li>
                        </ul>

                        <h3>测试结构</h3>
                        <p>每个测试文件应导出一个测试函数，函数内部使用断言函数验证功能：</p>
                        <pre><code>function testModuleName() {
    console.log('测试模块: ModuleName');
    
    // 测试用例 1
    assertEqual(functionToTest(input), expectedOutput, '测试用例 1 描述');
    
    // 测试用例 2
    assertNotNull(result, '测试用例 2 描述');
    
    // ...
}</code></pre>

                        <hr>

                        <h2>使用技巧</h2>
                        <ul>
                            <li><strong>定期运行测试</strong>：在修改代码后及时运行测试，确保功能正常</li>
                            <li><strong>查看控制台</strong>：仔细查看控制台输出，了解每个测试的详细情况</li>
                            <li><strong>修复失败测试</strong>：如果测试失败，根据错误信息定位问题并修复</li>
                            <li><strong>添加新测试</strong>：为新功能添加对应的测试用例，确保代码质量</li>
                            <li><strong>测试隔离</strong>：每个测试应该独立运行，不依赖其他测试的结果</li>
                        </ul>

                        <hr>

                        <h2>注意事项</h2>
                        <ul>
                            <li>所有测试在本地浏览器运行，不会上传任何数据</li>
                            <li>测试结果仅供参考，不构成代码质量保证</li>
                            <li>某些测试可能需要特定的依赖库（如 XLSX），如果库未加载，相关测试可能会失败</li>
                            <li>建议在修改代码后运行测试，确保功能正常</li>
                            <li>如果测试失败，请检查浏览器控制台的详细错误信息</li>
                        </ul>

                        <hr>

                        <h2>常见问题</h2>
                        <h3>Q: 为什么某些测试失败？</h3>
                        <p>A: 可能的原因包括：</p>
                        <ul>
                            <li>依赖库未正确加载（如 XLSX、Chart.js 等）</li>
                            <li>测试代码本身存在错误</li>
                            <li>被测试的函数已修改，但测试用例未更新</li>
                            <li>浏览器环境不支持某些功能</li>
                        </ul>

                        <h3>Q: 如何添加新的测试？</h3>
                        <p>A: 添加新测试的步骤：</p>
                        <ol>
                            <li>在 <code>tests/</code> 目录下创建新的测试文件（如 <code>test-new-module.js</code>）</li>
                            <li>在测试文件中编写测试函数，使用断言函数验证功能</li>
                            <li>在 <code>tests/index.html</code> 中引入新的测试文件</li>
                            <li>在 <code>runAllTests</code> 函数中添加对应的测试套件</li>
                        </ol>

                        <h3>Q: 测试结果不准确怎么办？</h3>
                        <p>A: 请检查以下几点：</p>
                        <ul>
                            <li>确保所有依赖库已正确加载</li>
                            <li>检查浏览器控制台的错误信息</li>
                            <li>验证测试用例的期望值是否正确</li>
                            <li>确认被测试的函数是否已正确实现</li>
                        </ul>

                        <h3>Q: 如何调试失败的测试？</h3>
                        <p>A: 调试步骤：</p>
                        <ul>
                            <li>查看控制台输出的错误信息</li>
                            <li>使用浏览器开发者工具设置断点</li>
                            <li>检查被测试函数的实际返回值</li>
                            <li>对比期望值和实际值的差异</li>
                            <li>检查测试用例的逻辑是否正确</li>
                        </ul>
                    </div>
                </div>

                <!-- 使用声明 -->
                <div class="card-white mt-20">
                    <h2 class="usage-statement-title">Admin · 单元测试工具使用声明</h2>
                    <p class="usage-statement-text">本测试套件用于验证 Shipping Tools 项目的核心功能模块，包括错误处理、公共工具函数、解析工具、日期工具、周数工具、港口排序工具、AI 工具、PDF 工具、市场分析工具、模板工具和调试工具等。</p>
                    <p class="usage-statement-text">所有测试在本地浏览器运行，不会上传任何数据。测试结果仅供参考，不构成代码质量保证。</p>
                </div>
            </div>
        </main>
    </div>

    <!-- 引入导航栏公共组件 -->
    <script src="../vendor/common-utils.js"></script>
    <script src="../vendor/debug-utils.js"></script>
    <script src="../vendor/sidebar-loader.js"></script>
    <script>
        init001ToolPage('tests/readme.html', 'admin', null, true); // 跳过身份验证
    </script>
</body>
</html>

